name: Build and Push Docker Image

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Login to Docker Hub
      uses: docker/login-action@v2
      with:
        username: ${{ secrets.DOCKER_USERNAME }}
        password: ${{ secrets.DOCKER_PASSWORD }}
    
    - name: Build and push
      uses: docker/build-push-action@v4
      with:
        context: .
        push: true
        tags: ${{ secrets.DOCKER_USERNAME }}/comfyui-wan-worker:latest
```

- **Commit changes** (Start commit) butonuna bas

---

### 3.2 Docker Hub HesabÄ± OluÅŸtur

- https://hub.docker.com â†’ **Sign Up** (Ãœcretsiz)
- KullanÄ±cÄ± adÄ± oluÅŸtur (Ã¶rnek: `umutcan123`)
- Email doÄŸrula

---

### 3.3 Docker Hub Token Al

Docker Hub'da:
- SaÄŸ Ã¼st â†’ **Account Settings**
- Sol menÃ¼ â†’ **Security**
- **New Access Token** butonuna bas
- Token adÄ±: `github-actions`
- **Generate** â†’ Token'Ä± **KOPYALA** (bir daha gÃ¶remezsin!)

---

### 3.4 GitHub Secrets Ekle

GitHub repo'nda:
- **Settings** sekmesi
- Sol menÃ¼ â†’ **Secrets and variables** â†’ **Actions**
- **New repository secret** butonu

**2 secret ekle:**

**Secret 1:**
```
Name: DOCKER_USERNAME
Secret: umutcan123  (senin Docker Hub kullanÄ±cÄ± adÄ±n)
```

**Secret 2:**
```
Name: DOCKER_PASSWORD  
Secret: (az Ã¶nce kopyaladÄ±ÄŸÄ±n token)
```

---

## âš™ï¸ ADIM 4: Build'i BaÅŸlat

GitHub'da:
- **Actions** sekmesi
- Sol tarafta **Build and Push Docker Image** workflow'una tÄ±kla
- SaÄŸ tarafta **Run workflow** â†’ **Run workflow** butonu

**2-3 dakika bekle.** âœ… YeÅŸil tik Ã§Ä±kÄ±nca build tamamdÄ±r!

---

## ğŸš€ ADIM 5: RunPod'da Kullan

### 5.1 Yeni Endpoint OluÅŸtur
RunPod â†’ Serverless â†’ **+ New Endpoint**

### 5.2 Docker Image
```
umutcan123/comfyui-wan-worker:latest
```
(Senin Docker Hub username'ini kullan)

### 5.3 Ayarlar
```
Container Disk: 20 GB

Environment Variables:
  (boÅŸ bÄ±rak, Dockerfile'da zaten var)

Advanced â†’ Network Volume:
  Volume: test
  
GPU: 24 GB

Workers: 0 (auto-scale)
Idle Timeout: 5 sec
Execution Timeout: 600 sec
